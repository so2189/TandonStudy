;/*FB_PKG_DELIM*/

__d("PolarisEmbedModal.react",["fbt","invariant","IGDSBox.react","IGDSButton.react","IGDSDialog.react","IGDSSpinner.react","IGDSText.react","PolarisClipboard","PolarisFastLink.react","PolarisInstapi","PolarisLogger","PolarisUA","err","polarisGetPostFromGraphMediaInterface","promiseDone","react","usePrevious"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useEffect,n=b.useRef,o=b.useState,p=h._("Copy embed code"),q=h._("Embed code copied"),r=h._("Select embed code");function a(a){var b=a.analyticsContext,e=a.code,f=a.id,g=a.onClose,j=a.ownerId,s=a.productType,t=a.username;a=o({});var u=a[0],v=a[1];a=o(null);var w=a[0],x=a[1];a=o(!1);var y=a[0],z=a[1];a=o("");var A=a[0],B=a[1];a=o(!1);var C=a[0],D=a[1];a=o(s!=="guide"&&s!=="profile");var E=a[0],F=a[1];a=o(!1);var G=a[0],H=a[1];a=o(!1);var I=a[0],J=a[1];a=o(!1);var K=a[0],L=a[1],M=n(null),N=c("usePrevious")({code:e,includeCaption:E}),O=l(function(){var a;if(s==="profile"&&t!=null)a=t;else if(s==="guide"&&f!=null)a="guide/"+f;else if(e!=null)a=(d("polarisGetPostFromGraphMediaInterface").isClipsProductType(s)?"reel/":"p/")+e;else throw c("err")("EmbedModal missing username, guide ID or shortcode.");return{hidecaption:E?"0":"1",maxwidth:"540",url:"https://www.instagram.com/"+a}},[e,f,E,s,t]),P=l(function(){var a,b=O(),e=(a=JSON.stringify(b))!=null?a:"";a=u[e];a!==void 0?B(a):(D(!0),c("promiseDone")(d("PolarisInstapi").apiGet("/api/v1/oembed/",{query:b}).then(function(a){a=a.data.html;var b=babelHelpers["extends"]({},u);b[e]=a;v(b);B(a);D(!1)})))},[u,O]);m(function(){P()},[P]);m(function(){return function(){window.clearTimeout(w)}},[w]);m(function(){(N==null||N.includeCaption!==E||N.code!==e)&&P()},[e,P,E,N]);a=function(){if(d("PolarisClipboard").canCopy()||d("PolarisUA").isMobile())return null;else if(navigator.userAgent.indexOf("Macintosh")||navigator.userAgent.indexOf("Mac OS"))return h._("Press Command-C to copy.");return h._("Press Control-C to copy.")};var Q=function(){return d("PolarisClipboard").canCopy()&&!y},R=function(){M.current||i(0,51626);(M.current.selectionStart!==0||M.current.selectionEnd<M.current.value.length)&&M.current.setSelectionRange(0,M.current.value.length,"forward");if(document.activeElement!==M.current){var a;(a=M.current)==null?void 0:a.focus()}},S=function(){var a={mediaId:f,ownerId:j,source:b,type:s==="guide"?"guide":"feed"},c=d("PolarisClipboard").copy(A);c?(d("PolarisLogger").logAction("embedCodeCopy",a),H(!0),x(window.setTimeout(function(){H(!1),x(null)},3e3))):(d("PolarisLogger").logAction("embedCodeFailToCopy",a),R(),z(!0))},T=function(){J(!1)},U=function(){J(!0),R()},V=function(a){a=a.target;a instanceof HTMLTextAreaElement||i(0,51626);L(a.selectionStart===0&&a.selectionEnd>=a.value.length)},W=function(){R()},X=function(a){F(!!a.target.checked)},Y=C?"":A,Z=h._("API Terms of Use");S=Q()?S:W;W="";a=a();Q()?G?W=q:W=p:K&&I&&a!=null&&a!==""?W=a:W=r;return k.jsx(c("IGDSDialog.react"),{onClose:g,children:k.jsxs(c("IGDSBox.react"),{padding:4,position:"relative",children:[k.jsx("textarea",{className:"xvbhtw8 x1619dve x19gtwsn x1nk0tez x1xp9za0 x1hm1hlx x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv x5n08af x1i0vuye x1f6kntn xqemwdq xdj266r x11i5rnm xwoyzhm x1mh8g0r xu97haq xtt52l0 xuxw1ft",dir:"ltr",disabled:C,onBlur:T,onFocus:U,onSelect:V,readOnly:!0,ref:M,value:Y}),["guide","profile"].includes(s)||k.jsxs("label",{className:"x972fbf xcfux6l x1qhh985 xm0m39n xk390pu xdj266r x11i5rnm xwoyzhm x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x11njtxf",htmlFor:f!=null?f:void 0,children:[k.jsx("input",{checked:E,className:"x1t4t16n x1mh8g0r",id:f!=null?f:void 0,onChange:X,type:"checkbox"}),h._("Include caption"),C&&k.jsx("div",{className:"x1rg5ohu xdj266r x1t4t16n xat24cr x8j4wrb x1uhb9sk xxymvpz",children:k.jsx(c("IGDSSpinner.react"),{size:"small"})})]}),k.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:C,label:W,onClick:S})}),k.jsx(c("IGDSText.react").Body2,{color:"secondaryText",children:h._("By using this embed, you agree to Instagram's {apiTermsOfUseLink}.",[h._param("apiTermsOfUseLink",k.jsx(c("PolarisFastLink.react"),{href:"/about/legal/terms/api/",target:"_blank",children:Z}))])})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisRelatedProfilesStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("Related accounts");g.RELATED_PROFILES_HEADER=a}),98);